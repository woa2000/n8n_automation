{"updatedAt":"2025-12-05T13:59:35.365Z","createdAt":"2025-12-05T13:59:35.365Z","id":"3EDQeJKr0m8Fklir","name":"Instagram Stories","active":false,"isArchived":false,"nodes":[{"parameters":{"content":"ğŸ¬ **Instagram Story Automation Template**\n\n**What this does:** Automatically posts Instagram Stories from videos listed in a Google Sheet.\n\n**Quick Setup (5 minutes):**\n1ï¸âƒ£ Configure the âš™ï¸ Config node with your Instagram Business ID and Sheet details\n2ï¸âƒ£ Connect your Google Sheets and Facebook Graph API credentials\nYou can download my template here:\nhttps://imanetworks.ch/wp-content/uploads/2025/09/Instagram-Videos-Template.xlsx\n\n3ï¸âƒ£ Add video URLs to your Google Sheet\n4ï¸âƒ£ Test with Manual Trigger, then enable Schedule\n\n**For Non-Technical Users:**\nâ€¢ You only need to edit the âš™ï¸ Config node once\nâ€¢ After setup, just add videos to your Google Sheet\nâ€¢ The workflow handles everything automatically\n\n**Need Help?** Check the troubleshooting section below!","height":384,"width":736},"id":"bc822063-0999-42d7-971c-a48added1fc8","name":"ğŸ“– SETUP GUIDE","type":"n8n-nodes-base.stickyNote","position":[0,0],"notesInFlow":false,"typeVersion":1},{"parameters":{"assignments":{"assignments":[{"id":"cfg-1","name":"IG_BUSINESS_ID","type":"string","value":"Your Instagram ID"},{"id":"cfg-2","name":"GRAPH_VERSION","type":"string","value":"v23.0"},{"id":"cfg-3","name":"SHEET_DOC_ID","type":"string","value":"Google Sheet ID (you can see it in the url of your sheet)"},{"id":"cfg-4","name":"SHEET_TAB_NAME","type":"string","value":"Instagram Videos"}]},"options":{}},"id":"ff568149-b682-4c3b-b1c1-49c5afcc6f1a","name":"âš™ï¸ Configuration Hub","type":"n8n-nodes-base.set","position":[384,464],"notesInFlow":true,"typeVersion":3.4,"notes":"ğŸ”§ **SETUP REQUIRED** - Replace these values:\n\nâ€¢ **IG_BUSINESS_ID**: Your Instagram Business Account ID\n  â†’ Find in Facebook Business Manager > Instagram Accounts\n  â†’ It's a long number (e.g., 17841450311185426)\n\nâ€¢ **GRAPH_VERSION**: Facebook API version (usually v21.0 or newer)\n  â†’ Check https://developers.facebook.com/docs/graph-api\n\nâ€¢ **SHEET_DOC_ID**: Your Google Sheet ID from the URL\n  â†’ Copy from: docs.google.com/spreadsheets/d/[THIS_PART]/edit\n\nâ€¢ **SHEET_TAB_NAME**: The exact name of your sheet tab\n  â†’ Default: \"Instagram Videos\" (case-sensitive)\n\nâš ï¸ **Important**: Only change these values once during setup!"},{"parameters":{},"id":"13ffdc7d-b5f4-4366-9d1f-85bb5491ffd0","name":"ğŸš€ Manual Start","type":"n8n-nodes-base.manualTrigger","position":[16,400],"notesInFlow":true,"typeVersion":1,"notes":"ğŸ¯ **FOR TESTING**\n\nClick the â–¶ï¸ button to test your workflow immediately.\n\n**When to use:**\nâ€¢ First-time setup testing\nâ€¢ Checking if credentials work\nâ€¢ Testing new videos before scheduling\n\n**Non-technical tip**: Always test manually before enabling the schedule!"},{"parameters":{"rule":{"interval":[{"triggerAtHour":20,"triggerAtMinute":30}]}},"id":"37ae5caa-83ef-4317-8b3f-b7fbe8f7b621","name":"â° Auto Schedule","type":"n8n-nodes-base.scheduleTrigger","position":[16,608],"notesInFlow":true,"typeVersion":1.2,"notes":"ğŸ• **AUTOMATIC POSTING**\n\nCurrently set to run daily at 8:30 PM.\n\n**To change the time:**\n1. Click this node\n2. Adjust 'triggerAtHour' (0-23, where 20 = 8 PM)\n3. Adjust 'triggerAtMinute' (0-59)\n\n**Examples:**\nâ€¢ 9:00 AM = Hour: 9, Minute: 0\nâ€¢ 2:30 PM = Hour: 14, Minute: 30\nâ€¢ 11:45 PM = Hour: 23, Minute: 45\n\n**Tip**: Choose times when your audience is most active!"},{"parameters":{"content":"ğŸ“‹ **Google Sheet Format Requirements**\n\n**Required Columns:**\nâ€¢ **Path** â†’ Direct video URL (must be publicly accessible)\nâ€¢ **Posted** â†’ Leave empty for new videos\n\n**Video Requirements:**\nâ€¢ Format: MP4\nâ€¢ Max duration: 60 seconds\nâ€¢ Aspect ratio: 9:16 (vertical) recommended\nâ€¢ Max file size: 4GB\nâ€¢ URL must not require login/authentication\n\n**Example Row:**\n| Path | Posted |\n|------|--------|\n| https://example.com/video.mp4 | |\n\n**After posting, 'Posted' will show 'true'**","height":384,"width":480},"id":"22e09ae2-f983-4e1d-8072-d61b2730dc3f","name":"ğŸ“Š Sheet Requirements","type":"n8n-nodes-base.stickyNote","position":[768,0],"notesInFlow":false,"typeVersion":1},{"parameters":{"documentId":{"mode":"list","value":"={{ $json.SHEET_DOC_ID }}"},"sheetName":{"mode":"name","value":"={{ $json.SHEET_TAB_NAME }}"},"options":{}},"id":"8e820f14-6202-40b8-af89-7254acdfd9ac","name":"ğŸ“Š Fetch Videos from Sheet","type":"n8n-nodes-base.googleSheets","position":[816,560],"notesInFlow":true,"typeVersion":4.5,"alwaysOutputData":true,"notes":"ğŸ“¥ **CREDENTIAL SETUP REQUIRED**\n\n**What it does:** Reads all videos from your Google Sheet\n\n**Setup Steps:**\n1. Click the 'Credential for Google Sheets' dropdown\n2. Select 'Create New Credential'\n3. Choose 'Google Sheets OAuth2 API'\n4. Click 'Connect my account' and sign in\n5. Grant permissions to access your sheets\n\n**Troubleshooting:**\nâ€¢ Error 403: Check sheet sharing permissions\nâ€¢ 'Sheet not found': Verify SHEET_TAB_NAME in Config\nâ€¢ No data: Ensure sheet has headers 'Path' and 'Posted'"},{"parameters":{"type":"random"},"id":"97020714-0f47-4c53-bbb6-35008bcf2815","name":"ğŸ² Randomize Order","type":"n8n-nodes-base.sort","position":[1056,560],"notesInFlow":true,"typeVersion":1,"notes":"ğŸ”€ **SMART SELECTION**\n\n**What it does:** Shuffles your video list randomly\n\n**Why this helps:**\nâ€¢ Prevents always posting the first video\nâ€¢ Creates variety in your content schedule\nâ€¢ Ensures fair rotation of all videos\n\n**No setup needed** - this works automatically!\n\n**Note:** The workflow will still skip videos already marked as 'Posted'"},{"parameters":{"options":{}},"id":"5e13b3a1-ffd6-4dcd-92f1-485bb7b8df65","name":"ğŸ”„ Process Each Video","type":"n8n-nodes-base.splitInBatches","position":[1296,560],"notesInFlow":true,"typeVersion":3,"notes":"ğŸ” **VIDEO PROCESSOR**\n\n**What it does:** Checks each video one by one to find unposted content\n\n**How it works:**\n1. Takes the shuffled list\n2. Examines each video's 'Posted' status\n3. Finds the first video that hasn't been posted\n4. Processes only that video\n\n**No configuration needed** - this is automatic!\n\n**Result:** Only posts one new video per run"},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"cond-posted","operator":{"type":"string","operation":"notContains"},"leftValue":"={{ $json.posted_story }}","rightValue":"true"}]},"options":{}},"id":"95a25769-1594-44ff-8a0a-39f427e00264","name":"â“ Already Posted Check","type":"n8n-nodes-base.if","position":[1584,560],"notesInFlow":true,"typeVersion":2.2,"notes":"ğŸš¦ **SMART FILTER**\n\n**What it does:** Checks if this video was already posted\n\n**Logic:**\nâ€¢ **If Posted = 'true'** â†’ Skip this video, check next one\nâ€¢ **If Posted is empty/false** â†’ Continue to post this video\n\n**Why this matters:**\nâ€¢ Prevents duplicate posts\nâ€¢ Automatically tracks what's been shared\nâ€¢ Saves you from manual tracking\n\n**No setup needed** - works automatically!"},{"parameters":{"assignments":{"assignments":[{"id":"a1","name":"instagram_business_id","type":"string","value":"={{ $json.IG_BUSINESS_ID || $('âš™ï¸ Configuration Hub').item.json.IG_BUSINESS_ID }}"},{"id":"a2","name":"video_url","type":"string","value":"={{ $json.source_url }}"},{"id":"a3","name":"api_version","type":"string","value":"={{ $json.GRAPH_VERSION || $('âš™ï¸ Configuration Hub').item.json.GRAPH_VERSION }}"}]},"options":{}},"id":"609efd75-145e-4b2d-a46a-bfaad5bbaf4f","name":"ğŸ¯ Prepare Video Data","type":"n8n-nodes-base.set","position":[1824,432],"notesInFlow":true,"typeVersion":3.4,"notes":"ğŸ“‹ **DATA PREPARATION**\n\n**What it does:** Organizes the video information for Instagram\n\n**Variables created:**\nâ€¢ **instagram_business_id**: Your Instagram account ID\nâ€¢ **video_url**: The video file location\nâ€¢ **api_version**: Facebook API version to use\n\n**Why this step:** Makes the data clean and ready for Instagram's API\n\n**No configuration needed** - uses values from your Config node automatically!"},{"parameters":{"content":"ğŸ“± **Instagram Story Requirements**\n\n**Video Specs:**\nâ€¢ Format: MP4, MOV\nâ€¢ Duration: 1-60 seconds\nâ€¢ Resolution: 1080x1920 (9:16 ratio)\nâ€¢ Max file size: 4GB\nâ€¢ Frame rate: 30 fps max\n\n**URL Requirements:**\nâ€¢ Must be publicly accessible\nâ€¢ No login/password required\nâ€¢ HTTPS recommended\nâ€¢ Direct link to video file\n\n**Common Issues:**\nâ€¢ Google Drive/Dropbox share links won't work\nâ€¢ Password-protected videos will fail\nâ€¢ Very large files may timeout\n\n**Tip:** Test your URL in a browser first!","height":376,"width":400},"id":"a5245cfc-7308-4d0b-bcd6-ac24fe217eee","name":"ğŸ“± Video Requirements","type":"n8n-nodes-base.stickyNote","position":[1680,0],"typeVersion":1},{"parameters":{"method":"POST","url":"={{ 'https://graph.facebook.com/' + $('âš™ï¸ Configuration Hub').item.json.GRAPH_VERSION + '/' + $('ğŸ¯ Prepare Video Data').item.json['instagram_business_id'] + '/media' }}","authentication":"predefinedCredentialType","nodeCredentialType":"facebookGraphApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"media_type","value":"STORIES"},{"name":"video_url","value":"={{ $json['video_url'] }}"}]},"options":{}},"id":"6061bcff-0e00-4428-92e1-5249b8ca4096","name":"ğŸ“¤ Create Story Container","type":"n8n-nodes-base.httpRequest","position":[2096,480],"notesInFlow":true,"typeVersion":4.2,"credentials":{"facebookGraphApi":{"id":"Cg2abZlqogDjyddK","name":"Facebook Graph Woof Marketing"}},"notes":"ğŸ—ï¸ **CREDENTIAL SETUP REQUIRED**\n\n**What it does:** Creates an Instagram Story container (not published yet)\n\n**Setup Steps:**\n1. Click 'Credential for Facebook Graph API'\n2. Select 'Create New Credential'\n3. Enter your Facebook App credentials:\n   â€¢ App ID (from Facebook Developers)\n   â€¢ App Secret (from Facebook Developers)\n4. Grant Instagram permissions\n\n**What happens:** Instagram downloads and processes your video\n\n**Result:** Returns a container ID for the next step"},{"parameters":{"url":"={{ 'https://graph.facebook.com/' + $('âš™ï¸ Configuration Hub').item.json.GRAPH_VERSION + '/' + $('ğŸ“¤ Create Story Container').item.json.id }}","authentication":"predefinedCredentialType","nodeCredentialType":"facebookGraphApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"fields","value":"status_code,status"}]},"options":{"response":{"response":{"fullResponse":true,"responseFormat":"json"}}}},"id":"6852f1ff-f7d1-4e13-ab15-b8ea94ea7d15","name":"ğŸ” Check Processing Status","type":"n8n-nodes-base.httpRequest","position":[2384,480],"notesInFlow":true,"typeVersion":4.2,"credentials":{"facebookGraphApi":{"id":"Cg2abZlqogDjyddK","name":"Facebook Graph Woof Marketing"}},"notes":"â³ **STATUS MONITOR**\n\n**What it does:** Checks if Instagram finished processing your video\n\n**Possible statuses:**\nâ€¢ **IN_PROGRESS**: Still processing (wait more)\nâ€¢ **FINISHED**: Ready to publish âœ…\nâ€¢ **ERROR**: Something went wrong âŒ\n\n**Why this step:** Instagram needs time to encode/validate your video\n\n**No configuration needed** - uses the same Facebook credentials as previous step"},{"parameters":{"conditions":{"options":{"version":2,"caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"cond-finished","operator":{"type":"string","operation":"equals"},"leftValue":"={{ $json.body.status_code }}","rightValue":"FINISHED"}]},"options":{}},"id":"7e64d67b-600e-40b8-b9de-7d5414b3fbf8","name":"âœ… Ready to Publish?","type":"n8n-nodes-base.if","position":[2656,480],"notesInFlow":true,"typeVersion":2.2,"notes":"ğŸš¦ **PUBLISH GATE**\n\n**What it checks:** Is the video ready for publishing?\n\n**Two paths:**\nâ€¢ **TRUE (status = FINISHED)** â†’ Proceed to publish\nâ€¢ **FALSE (still processing)** â†’ Wait 30 seconds and check again\n\n**Why this matters:**\nâ€¢ Publishing too early = failure\nâ€¢ This ensures your video is properly processed\n\n**Automatic loop:** Will keep checking until ready or timeout"},{"parameters":{"amount":30},"id":"d0f2be41-a952-45f7-b254-0668e2fe0997","name":"â° Wait 30 Seconds","type":"n8n-nodes-base.wait","position":[2704,1008],"webhookId":"8a695322-e5bf-4b2c-bfb9-892f2cb0d8e6","notesInFlow":true,"typeVersion":1.1,"notes":"â¸ï¸ **PATIENCE IS KEY**\n\n**What it does:** Waits 30 seconds before checking status again\n\n**Why 30 seconds:**\nâ€¢ Gives Instagram time to process\nâ€¢ Prevents overwhelming their servers\nâ€¢ Most videos process within 1-3 minutes\n\n**Adjustable:** You can change the wait time if needed\nâ€¢ Smaller videos: 15-20 seconds\nâ€¢ Larger videos: 45-60 seconds\n\n**Note:** The workflow will loop until processing is complete"},{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"={{ $('âš™ï¸ Configuration Hub').item.json.GRAPH_VERSION }}","node":"={{ $('ğŸ¯ Prepare Video Data').item.json['instagram_business_id'] }}","edge":"media_publish","options":{"queryParameters":{"parameter":[{"name":"creation_id","value":"={{ $('ğŸ“¤ Create Story Container').item.json.id }}"}]}}},"id":"622aeade-9c26-437a-b174-94ef5df0f573","name":"ğŸ‰ Publish to Instagram","type":"n8n-nodes-base.facebookGraphApi","position":[2944,480],"notesInFlow":true,"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"Cg2abZlqogDjyddK","name":"Facebook Graph Woof Marketing"}},"notes":"ğŸš€ **THE MOMENT OF TRUTH**\n\n**What it does:** Publishes your video as an Instagram Story\n\n**This step:**\nâ€¢ Takes the processed video container\nâ€¢ Makes it live on your Instagram account\nâ€¢ Your followers can now see the story\n\n**Success indicators:**\nâ€¢ Returns a media ID\nâ€¢ No error messages\nâ€¢ Story appears on your Instagram profile\n\n**Uses the same Facebook credentials** as previous steps"},{"parameters":{"operation":"appendOrUpdate","documentId":{"mode":"list","value":"={{ $('âš™ï¸ Configuration Hub').item.json.SHEET_DOC_ID }}"},"sheetName":{"mode":"name","value":"={{ $('âš™ï¸ Configuration Hub').item.json.SHEET_TAB_NAME }}"},"columns":{"value":{"source_url":"={{ $('ğŸ¯ Prepare Video Data').item.json.video_url }}","posted_story":"\"true\""},"schema":[{"id":"id","type":"string","display":true,"removed":true,"required":false,"displayName":"id","defaultMatch":true,"canBeUsedToMatch":true},{"id":"title","type":"string","display":true,"removed":true,"required":false,"displayName":"title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"media_type","type":"string","display":true,"removed":true,"required":false,"displayName":"media_type","defaultMatch":false,"canBeUsedToMatch":true},{"id":"mime_type","type":"string","display":true,"removed":true,"required":false,"displayName":"mime_type","defaultMatch":false,"canBeUsedToMatch":true},{"id":"source_url","type":"string","display":true,"removed":false,"required":false,"displayName":"source_url","defaultMatch":false,"canBeUsedToMatch":true},{"id":"posted_reels","type":"string","display":true,"removed":true,"required":false,"displayName":"posted_reels","defaultMatch":false,"canBeUsedToMatch":true},{"id":"posted_story","type":"string","display":true,"removed":false,"required":false,"displayName":"posted_story","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["source_url"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"d6f92938-104e-4319-8d2c-edcba4ff8a67","name":"âœï¸ Mark as Posted","type":"n8n-nodes-base.googleSheets","position":[3216,480],"notesInFlow":true,"typeVersion":4.5,"notes":"ğŸ“ **RECORD KEEPING**\n\n**What it does:** Updates your Google Sheet to mark this video as posted\n\n**How it works:**\n1. Finds the row with the matching video URL\n2. Sets the 'Posted' column to 'true'\n3. Prevents the same video from being posted again\n\n**Why this matters:**\nâ€¢ Automatic tracking\nâ€¢ No duplicate posts\nâ€¢ Clear record of what's been shared\n\n**Uses the same Google Sheets credentials** as the fetch step"},{"parameters":{"content":"ğŸš¨ **Troubleshooting Guide**\n\n**Common Issues:**\n\n**1. Workflow stops at processing:**\nâ€¢ Video URL not accessible publicly\nâ€¢ Video doesn't meet Instagram requirements\nâ€¢ Check video format (MP4 recommended)\n\n**2. 'Sheet not found' error:**\nâ€¢ Verify SHEET_DOC_ID in Config\nâ€¢ Check SHEET_TAB_NAME spelling (case-sensitive)\nâ€¢ Ensure sheet is accessible to your Google account\n\n**3. Facebook API errors:**\nâ€¢ Verify Instagram Business Account connection\nâ€¢ Check app permissions in Facebook Developers\nâ€¢ Ensure account has Instagram Content Publishing permission\n\n**4. Posted column not updating:**\nâ€¢ Confirm Path values are unique in sheet\nâ€¢ Check Google Sheets permissions\nâ€¢ Verify credential connections\n\n**Need more help?** Check n8n community forums or documentation.","height":560,"width":500},"id":"2c4f55ef-7482-4fd6-adba-9538b6c7388c","name":"ğŸ”§ Troubleshooting","type":"n8n-nodes-base.stickyNote","position":[2912,640],"typeVersion":1},{"parameters":{"content":"ğŸ“ **Setup Checklist for Non-Technical Users**\n\n**Before you start:**\nâ˜ Instagram Business Account (not personal)\nâ˜ Facebook Business Manager access\nâ˜ Google account with Sheets access\nâ˜ Videos in MP4 format, publicly hosted\n\n**Required Credentials:**\nâ˜ Facebook Developer App (free)\nâ˜ Google Sheets OAuth connection\nâ˜ Instagram Business Account linked to Facebook\n\n**One-time setup:**\nâ˜ Replace values in âš™ï¸ Configuration Hub\nâ˜ Connect Facebook Graph API credential\nâ˜ Connect Google Sheets credential\nâ˜ Test with Manual Trigger\nâ˜ Enable Schedule Trigger\n\n**Ongoing usage:**\nâ˜ Add video URLs to Google Sheet\nâ˜ Leave 'Posted' column empty for new videos\nâ˜ Check Instagram for posted stories\n\n**That's it! The workflow handles everything else automatically.**","height":536,"width":440},"id":"182f7a83-f58b-417f-a0cc-0fae6d967518","name":"âœ… Setup Checklist","type":"n8n-nodes-base.stickyNote","position":[256,672],"typeVersion":1}],"connections":{"â° Auto Schedule":{"main":[[{"node":"âš™ï¸ Configuration Hub","type":"main","index":0}]]},"ğŸš€ Manual Start":{"main":[[{"node":"âš™ï¸ Configuration Hub","type":"main","index":0}]]},"â° Wait 30 Seconds":{"main":[[{"node":"ğŸ” Check Processing Status","type":"main","index":0}]]},"ğŸ² Randomize Order":{"main":[[{"node":"ğŸ”„ Process Each Video","type":"main","index":0}]]},"âœ… Ready to Publish?":{"main":[[{"node":"ğŸ‰ Publish to Instagram","type":"main","index":0}],[{"node":"â° Wait 30 Seconds","type":"main","index":0}]]},"ğŸ¯ Prepare Video Data":{"main":[[{"node":"ğŸ“¤ Create Story Container","type":"main","index":0}]]},"ğŸ”„ Process Each Video":{"main":[[],[{"node":"â“ Already Posted Check","type":"main","index":0}]]},"âš™ï¸ Configuration Hub":{"main":[[{"node":"ğŸ“Š Fetch Videos from Sheet","type":"main","index":0}]]},"â“ Already Posted Check":{"main":[[{"node":"ğŸ¯ Prepare Video Data","type":"main","index":0}],[{"node":"ğŸ”„ Process Each Video","type":"main","index":0}]]},"ğŸ‰ Publish to Instagram":{"main":[[{"node":"âœï¸ Mark as Posted","type":"main","index":0}]]},"ğŸ“¤ Create Story Container":{"main":[[{"node":"ğŸ” Check Processing Status","type":"main","index":0}]]},"ğŸ“Š Fetch Videos from Sheet":{"main":[[{"node":"ğŸ² Randomize Order","type":"main","index":0}]]},"ğŸ” Check Processing Status":{"main":[[{"node":"âœ… Ready to Publish?","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"3f3a98e5-305b-4834-80d3-d63de396410d","triggerCount":0,"shared":[{"updatedAt":"2025-12-05T13:59:35.369Z","createdAt":"2025-12-05T13:59:35.369Z","role":"workflow:owner","workflowId":"3EDQeJKr0m8Fklir","projectId":"5dTxE8vBWJ6kQMrp"}],"tags":[]}